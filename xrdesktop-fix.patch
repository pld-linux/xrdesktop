diff -Nuard xrdesktop-0.4.orig/xrdesktop xrdesktop-0.4/xrdesktop
--- xrdesktop-0.4.orig/xrdesktop	Wed Jun 12 20:28:46 2002
+++ xrdesktop-0.4/xrdesktop	Fri Aug  2 12:12:28 2002
@@ -63,11 +63,11 @@
 my $selected_machine_ip;
 my $selected_uname;
 my $selected_geom;
-my $selected_fs;
-my $selected_bitmap_upd;
+my $selected_fs = "";
+my $selected_bitmap_upd = "";
 my $selected_kmap;
 my $selected_kmap_hex;
-my $selected_lic;
+my $selected_lic = "";
 my $dialog1;
 my $dialog_button_ok;
 my $dialog_button_cancel;
@@ -83,129 +83,63 @@
 
 # the BIGASS list of keymaps. fear its awesome girth and stuff.
 my %kmap_trans_hash = (
-	"Albanian" => "0x0000041c",
-	"Arabic 101" => "0x00000401",
-	"Arabic 102 AZERTY" => "0x00020401",
-	"Arabic 102" => "0x00010401",
-	"Armenian Eastern" => "0x0000042b",
-	"Armenian Western" => "0x0001042b",
-	"Azeri Cyrillic" => "0x0000082c",
-	"Azeri Latin" => "0x0000042c",
-	"Belarusian" => "0x00000423",
-	"Belgian Comma" => "0x0001080c",
-	"Belgian Dutch" => "0x00000813",
-	"Belgian French" => "0x0000080c",
-	"Bulgarian Latin" => "0x00010402",
-	"Bulgarian" => "0x00000402",
-	"Canadian French legacy" => "0x00000c0c",
-	"Canadian French" => "0x00001009",
-	"Canadian Multilingual Standard" => "0x00011009",
-	"Chinese MS-PinYin98" => "0xe00e0804",
-	"Chinese NeiMa" => "0xe0050804",
-	"Chinese QuanPin" => "0xe0010804",
-	"Chinese ShuangPin" => "0xe0020804",
-	"Chinese US Keyboard" => "0x00000804",
-	"Chinese ZhengMa" => "0xe0030804",
-	"Chinese Alphanumeric" => "0xe01f0404",
-	"Chinese Array" => "0xe0050404",
-	"Chinese Big5 Code" => "0xe0040404",
-	"Chinese ChangJie" => "0xe0020404",
-	"Chinese DaYi" => "0xe0060404",
-	"Chinese New ChangJie" => "0xe0090404",
-	"Chinese New Phoneetic" => "0xe0080404",
-	"Chinese Phonetic" => "0xe0010404",
-	"Chinese Quick" => "0xe0030404",
-	"Chinese US Keyboard" => "0x00000404",
-	"Chinese Unicode" => "0xe0070404",
-	"Croatian" => "0x0000041a",
-	"Croatian Specific" => "0x0000041a",
-	"Czech QWERTY" => "0x00010405",
-	"Czech ProgrammerS" => "0x00020405",
-	"Czech" => "0x00000405",
-	"Danish" => "0x00000406",
-	"Devanagari INSCRIPT" => "0x00000439",
-	"Dutch" => "0x00000413",
-	"Estonian" => "0x00000425",
-	"Faeroese" => "0x00000438",
-	"Farsi" => "0x00000429",
-	"Finnish" => "0x0000040b",
-	"French" => "0x0000040c",
-	"Gaelic" => "0x00011809",
-	"Georgian" => "0x00000437",
-	"German IBM" => "0x00010407",
-	"German" => "0x00000407",
-	"Greek 220 Latin" => "0x00030408",
-	"Greek 220" => "0x00010408",
-	"Greek 319 Latin" => "0x00040408",
-	"Greek 319" => "0x00020408",
-	"Greek Latin" => "0x00050408",
-	"Greek Polytonic" => "0x00060408",
-	"Greek" => "0x00000408",
-	"Hebrew" => "0x0000040d",
-	"Hindi Traditional" => "0x00010439",
-	"Hungarian 101-key" => "0x0001040e",
-	"Hungarian" => "0x0000040e",
-	"Icelandic" => "0x0000040f",
-	"Irish" => "0x00001809",
-	"Italian 142" => "0x00010410",
-	"Italian" => "0x00000410",
-	"Japanese Input System" => "0xe0010411",
-	"Japanese" => "0x00000411",
-	"Japanese 106" => "0x00000411",
-	"Japanese pc98x1" => "0x00000411",
-	"Kazakh" => "0x0000043f",
-	"Korean Hangul MS-IME98" => "0xe0010412",
-	"Korean Hangul" => "0x00000412",
-	"Latin American" => "0x0000080a",
-	"Latvian QWERTY" => "0x00010426",
-	"Latvian" => "0x00000426",
-	"Lithuanian IBM" => "0x00000427",
-	"Lithuanian" => "0x00010427",
-	"Macedonian FYROM" => "0x0000042f",
-	"Marathi" => "0x0000044e",
-	"Norwegian" => "0x00000414",
-	"Polish 214" => "0x00010415",
-	"Polish Programmers" => "0x00000415",
-	"Portuguese Brazilian ABNT" => "0x00000416",
-	"Portuguese Brazilian ABNT2" => "0x00010416",
-	"Portuguese" => "0x00000816",
-	"Romanian" => "0x00000418",
-	"Russian Typewriter" => "0x00010419",
-	"Russian" => "0x00000419",
-	"Russian KO18-R" => "0x00000419",
-	"Serbian Cyrillic" => "0x00000c1a",
-	"Serbian Latin" => "0x0000081a",
-	"Slovak QWERTY" => "0x0001041b",
-	"Slovak" => "0x0000041b",
-	"Slovak Programmers" => "0x0000041b",
-	"Slovenian" => "0x00000424",
-	"Spanish Variation" => "0x0001040a",
-	"Spanish" => "0x0000040a",
-	"Swedish" => "0x0000041d",
-	"Swiss French" => "0x0000100c",
-	"Swiss German" => "0x0000080",
-	"Tamil" => "0x00000449",
-	"Tatar" => "0x00000444",
-	"Thai Kedmanee non-shiftlock" => "0x0002041e",
-	"Thai Kedmanee" => "0x0000041e",
-	"Thai Pattachote non-shiftlock" => "0x0003041e",
-	"Thai Pattachote" => "0x0001041e",
-	"Turkish F" => "0x0001041f",
-	"Turkish Q" => "0x0000041f",
-	"US English Talbe for IBM Arabic 238_L" => "0x00050409",
-	"US" => "0x00000409",
-	"US phantom key ver" => "0x00000409",
-	"Ukranian" => "0x00000422",
-	"English" => "0x00000809",
-	"US Dvorak left" => "0x00030409",
-	"US Dvorak right" => "0x00040409",
+	"Albanian" => "SQ",
+	"Arabic 101" => "AR",
+	"Belarusian" => "BE",
+	"Bulgarian" => "BG",
+	"Canadian French legacy" => "CF",
+	"Canadian Multilingual Standard" => "CF",
+	"Chinese US Keyboard" => "ZH",
+	"Croatian" => "HR",
+	"Czech" => "CS",
+	"Danish" => "DA",
+	"Dutch" => "NL",
+	"Estonian" => "ET",
+	"Faeroese" => "FO",
+	"Finnish" => "FI",
+	"French" => "FR",
+	"Gaelic" => "GD",
+	"Georgian" => "KA",
+	"German" => "DE",
+	"Greek" => "EL",
+	"Hebrew" => "HE",
+	"Hindi Traditional" => "HI",
+	"Hungarian" => "HU",
+	"Icelandic" => "IS",
+	"Irish" => "GA",
+	"Italian" => "IT",
+	"Japanese" => "JA",
+	"Kazakh" => "KK",
+	"Korean Hangul" => "KO",
+	"Latin American" => "LA",
+	"Latvian" => "LV",
+	"Lithuanian" => "LT",
+	"Macedonian FYROM" => "MK",
+	"Marathi" => "MR",
+	"Norwegian" => "NO",
+	"Polish Programmers" => "PL",
+	"Portuguese Brazilian ABNT" => "BR",
+	"Portuguese" => "PT",
+	"Romanian" => "RO",
+	"Russian" => "RU",
+	"Serbian Latin" => "SR",
+	"Slovak" => "SK",
+	"Slovenian" => "SL",
+	"Spanish" => "ES",
+	"Swedish" => "SV",
+	"Swiss French" => "SF",
+	"Swiss German" => "SG",
+	"Tamil" => "TA",
+	"Tatar" => "TT",
+	"Thai Kedmanee" => "TH",
+	"Turkish F" => "TR",
+	"US" => "US",
+	"Ukranian" => "UK",
+	"English" => "EN",
+	"US Dvorak right" => "DV",
 	"US Dvorak" => "0x00010409",
-	"US International" => "0x00020409",
-	"Uzbek Cyrillic" => "0x00000843",
-	"Vietnamese" => "0x0000042a",
-	"yu" => "0x0000041a",
-	"cf" => "0x00010c0c",
-	"us9" => "0x00010c1a",
+	"Uzbek Cyrillic" => "UZ",
+	"Vietnamese" => "VI",
 );
 
 # create the window
